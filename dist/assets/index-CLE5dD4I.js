(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&m(e)}).observe(document,{childList:!0,subtree:!0});function u(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function m(t){if(t.ep)return;t.ep=!0;const a=u(t);fetch(t.href,a)}})();const S="modulepreload",w=function(f,l){return new URL(f,l).href},h={},v=function(l,u,m){let t=Promise.resolve();if(u&&u.length>0){let c=function(s){return Promise.all(s.map(i=>Promise.resolve(i).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};const e=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),n=r?.nonce||r?.getAttribute("nonce");t=c(u.map(s=>{if(s=w(s,m),s in h)return;h[s]=!0;const i=s.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(!!m)for(let p=e.length-1;p>=0;p--){const g=e[p];if(g.href===s&&(!i||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":S,i||(d.as="script"),d.crossOrigin="",d.href=s,n&&d.setAttribute("nonce",n),document.head.appendChild(d),i)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})}))}function a(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return t.then(e=>{for(const r of e||[])r.status==="rejected"&&a(r.reason);return l().catch(a)})},E=""+new URL("index-C7ZKemgx.css",import.meta.url).href;(async()=>{if(window.__triviaGameLoaded){console.log("‚ñ∂Ô∏è Trivia Game: Ya inicializado. Saltando.");return}window.__triviaGameLoaded=!0,console.log("‚ñ∂Ô∏è Trivia Game: Inicializando...");async function f(e,r,n){if(r.parentElement.querySelector(`#${n}`)){console.log(`üé® CSS "${n}" ya inyectado.`);return}console.log(`üé® Cargando CSS desde ${e} para inyectar junto a`,r);try{const c=await fetch(e);if(!c.ok)throw new Error(`No se pudo cargar el CSS: ${c.statusText}`);const s=await c.text(),i=document.createElement("style");i.id=n,i.textContent=s,r.parentElement.insertBefore(i,r),console.log(`‚úÖ CSS "${n}" inyectado correctamente como hermano del componente.`)}catch(c){console.error(`‚ùå Fallo al inyectar CSS "${n}":`,c)}}function l(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}const{createGameManager:u}=await v(async()=>{const{createGameManager:e}=await import("./manager-D21duDoR.js");return{createGameManager:e}},[],import.meta.url),{createUIManager:m}=await v(async()=>{const{createUIManager:e}=await import("./uiManager-DJgQLliD.js");return{createUIManager:e}},[],import.meta.url);async function t(){console.log("üöÄ Ejecutando main()...");const e=document.getElementById("main-container");e?await f(E,e,"trivia-main-styles"):console.error("‚ùå No se encontr√≥ #main-container para inyectar el CSS."),document.documentElement.classList.remove("tw-pending");let r=[];try{const o=await fetch(`https://narrativas.ideal.es/juego-historia/events.json?t=${Date.now()}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);r=await o.json(),console.log("‚úÖ Eventos cargados correctamente.")}catch(o){console.error("‚ùå No se pudieron cargar los eventos:",o),e&&(e.innerHTML='<p style="text-align: center; padding: 2rem; color: red;">Error: No se pudieron cargar los datos del juego.</p>');return}const n=u(r),c=m();n.onStateChange=o=>c.update(o);const s={onStartGame:()=>n.startGame(),onConfirmPlacement:(o,y)=>n.confirmPlacement(o,y),onToggleCardExpansion:o=>n.toggleCardExpansion(o)};c.init(s),c.update(n.state),console.log("üß© Juego y UI inicializados.");const i=localStorage.getItem("triviaGameState");if(i){console.log("üíæ Partida guardada encontrada.");const o=JSON.parse(i);c.showResumeGameModal(()=>n.resumeGame(o),()=>{n.clearGameState(),n.startGame()})}}function a(){l(t)}document.getElementById("main-container")?(console.log("‚úÖ Contenedor principal encontrado. Lanzando app..."),a()):(console.warn("‚ö†Ô∏è Contenedor principal no encontrado. Esperando a que aparezca din√°micamente..."),new MutationObserver((r,n)=>{document.getElementById("main-container")&&(console.log("‚úÖ Contenedor principal detectado por MutationObserver. Lanzando app."),n.disconnect(),a())}).observe(document.body,{childList:!0,subtree:!0}))})();
